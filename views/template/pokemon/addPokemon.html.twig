{% extends "../../main.html.twig" %}
{% block main %}
<div class="container">
    <div class="row">
        <form class="col-md-6 mx-auto mt-5 form" method="post" action="{% if action == "/updatePokemon"%}{{action}}/{{pokemon._id}}{% else %}{{action}}{% endif %}">
            <div>
                <label for="name">Nom</label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Entrer un nom" value="{{pokemon.name}}">
            </div>

            <div>
                <label for="name">Type</label>
                <input type="text" class="form-control" id="type" name="type" placeholder="Entrer un type"
                    value="{{pokemon.type}}">
            </div>

            <div>
                <label for="level">Niveau</label>
                <input type="number" class="form-control" id="level" name="level" placeholder="Entrer un niveau" value="{{pokemon.level}}">
            </div>

            <div id="attack-container">
                <span id="errorAttack"></span>
                <label for="attack">Attaques</label>
                {% if pokemon.attacks|length > 0 %}
                {% for attack in pokemon.attacks %}
                <div id="attack" class="attack input-group">
                    <input type="text" class="form-control mb-3" name="attacks[]" placeholder="Entrer une attaque" value="{{attack}}">
                    {% if loop.index > 1 %}
                    <button type="button" id="remove-button" class="btn mb-3 bg-transparent" onclick="removeAttack(this)">X</button>
                    {% endif %}
                </div>
                {% endfor %}
                {% else %}           
                <div>
                    <div id="attack" class="attack input-group">
                        <input type="text" class="form-control mb-3" name="attacks[]" placeholder="Entrer une attaque" value="{{pokemon.attacks[0]}}">
                    </div>
                {% endif %}
                    <button type="button" class="btn btn-primary" onclick="addAttack()">+</button>
                </div>
                <div>
                    <label for="image">Image</label>
                    <input type="text" class="form-control" id="image" name="image" placeholder="Entrer un niveau" value="{{pokemon.image}}">
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>
</div>
{% endblock %}